<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Leptonica: src/zlibmem.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="moller52-tiny.jpg"></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Leptonica&#160;<span id="projectnumber">1.68</span></div>
   <div id="projectbrief">C Image Processing Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('zlibmem_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>zlibmem.c File Reference</h1>  </div>
</div>
<div class="contents">

<p>Compresses and decompresses a byte array from one memory buffer to another.  
<a href="#_details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="allheaders_8h_source.html">allheaders.h</a>&quot;</code><br/>
<code>#include &quot;zlib.h&quot;</code><br/>
</div>
<p><a href="zlibmem_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="environ_8h.html#a7ed60554e7d6dd89aca643189b1e70ad">l_uint8</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zlibmem_8c.html#af5f73212da1fc120580a66ad0708e853">zlibCompress</a> (<a class="el" href="environ_8h.html#a7ed60554e7d6dd89aca643189b1e70ad">l_uint8</a> *datain, size_t nin, size_t *pnout)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="environ_8h.html#a7ed60554e7d6dd89aca643189b1e70ad">l_uint8</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zlibmem_8c.html#a2532ea090cb52c1b2ee061dacaab7519">zlibUncompress</a> (<a class="el" href="environ_8h.html#a7ed60554e7d6dd89aca643189b1e70ad">l_uint8</a> *datain, size_t nin, size_t *pnout)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zlibmem_8c.html#a284afe654a26c44cd5eb54a2c740ec87">L_BUF_SIZE</a> = 32768</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zlibmem_8c.html#ad089e2090c179ca2e9c20e2b27def31e">ZLIB_COMPRESSION_LEVEL</a> = 6</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Compresses and decompresses a byte array from one memory buffer to another. </p>
<div class="fragment"><pre class="fragment">    zlib operations in memory, <span class="keyword">using</span> bbuffer
        <a class="code" href="environ_8h.html#a7ed60554e7d6dd89aca643189b1e70ad">l_uint8</a>   *<a class="code" href="leptprotos_8h.html#a7c6e1826a65bc4b0f3a771f57875658e">zlibCompress</a>()
        <a class="code" href="environ_8h.html#a7ed60554e7d6dd89aca643189b1e70ad">l_uint8</a>   *<a class="code" href="leptprotos_8h.html#ac13c8adb1f755e3c6b7c29ca2461c605">zlibUncompress</a>()


  This provides an example use of the byte buffer utility
  (see bbuffer.c for details of how the bbuffer works internally).
  We use zlib to compress and decompress a byte array from
  one memory buffer to another.  The standard method uses streams,
  but here we use the bbuffer as an expandable queue of pixels
  for both the reading and writing sides of each operation.

  With memory mapping, one should be able to compress between
  memory buffers by using the file system to buffer everything in
  the background, but the bbuffer implementation is more portable.
</pre></div> 
<p>Definition in file <a class="el" href="zlibmem_8c_source.html">zlibmem.c</a>.</p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="af5f73212da1fc120580a66ad0708e853"></a><!-- doxytag: member="zlibmem.c::zlibCompress" ref="af5f73212da1fc120580a66ad0708e853" args="(l_uint8 *datain, size_t nin, size_t *pnout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="environ_8h.html#a7ed60554e7d6dd89aca643189b1e70ad">l_uint8</a>* zlibCompress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a7ed60554e7d6dd89aca643189b1e70ad">l_uint8</a> *&#160;</td>
          <td class="paramname"><em>datain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>pnout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="leptprotos_8h.html#a7c6e1826a65bc4b0f3a771f57875658e">zlibCompress()</a></p>
<p>Input: datain (byte buffer with input data) nin (number of bytes of input data) &amp;nout (&lt;return&gt; number of bytes of output data) Return: dataout (compressed data), or null on error</p>
<p>Notes: (1) We repeatedly read in and fill up an input buffer, compress the data, and read it back out. zlib uses two byte buffers internally in the z_stream data structure. We use the bbuffers to feed data into the fixed bufferin, and feed it out of bufferout, in the same way that a pair of streams would normally be used if the data were being read from one file and written to another. This is done iteratively, compressing L_BUF_SIZE bytes of input data at a time. </p>

<p>Definition at line <a class="el" href="zlibmem_8c_source.html#l00073">73</a> of file <a class="el" href="zlibmem_8c_source.html">zlibmem.c</a>.</p>

<p>References <a class="el" href="bbuffer_8c_source.html#l00108">bbufferCreate()</a>, <a class="el" href="bbuffer_8c_source.html#l00147">bbufferDestroy()</a>, <a class="el" href="bbuffer_8c_source.html#l00181">bbufferDestroyAndSaveData()</a>, <a class="el" href="bbuffer_8c_source.html#l00239">bbufferRead()</a>, <a class="el" href="bbuffer_8c_source.html#l00368">bbufferWrite()</a>, <a class="el" href="environ_8h_source.html#l00214">CALLOC</a>, <a class="el" href="environ_8h_source.html#l00250">ERROR_PTR</a>, <a class="el" href="environ_8h_source.html#l00216">FREE</a>, <a class="el" href="zlibmem_8c_source.html#l00049">L_BUF_SIZE</a>, <a class="el" href="environ_8h_source.html#l00171">NULL</a>, <a class="el" href="environ_8h_source.html#l00249">PROCNAME</a>, and <a class="el" href="zlibmem_8c_source.html#l00050">ZLIB_COMPRESSION_LEVEL</a>.</p>

<p>Referenced by <a class="el" href="ccbord_8c_source.html#l02180">ccbaWriteStream()</a>, <a class="el" href="buffertest_8c_source.html#l00026">main()</a>, and <a class="el" href="psio2_8c_source.html#l02191">pixGenerateFlateData()</a>.</p>

</div>
</div>
<a class="anchor" id="a2532ea090cb52c1b2ee061dacaab7519"></a><!-- doxytag: member="zlibmem.c::zlibUncompress" ref="a2532ea090cb52c1b2ee061dacaab7519" args="(l_uint8 *datain, size_t nin, size_t *pnout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="environ_8h.html#a7ed60554e7d6dd89aca643189b1e70ad">l_uint8</a>* zlibUncompress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a7ed60554e7d6dd89aca643189b1e70ad">l_uint8</a> *&#160;</td>
          <td class="paramname"><em>datain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>pnout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="leptprotos_8h.html#ac13c8adb1f755e3c6b7c29ca2461c605">zlibUncompress()</a></p>
<p>Input: datain (byte buffer with compressed input data) nin (number of bytes of input data) &amp;nout (&lt;return&gt; number of bytes of output data) Return: dataout (uncompressed data), or null on error</p>
<p>Notes: (1) See <a class="el" href="leptprotos_8h.html#a7c6e1826a65bc4b0f3a771f57875658e">zlibCompress()</a>. </p>

<p>Definition at line <a class="el" href="zlibmem_8c_source.html#l00156">156</a> of file <a class="el" href="zlibmem_8c_source.html">zlibmem.c</a>.</p>

<p>References <a class="el" href="bbuffer_8c_source.html#l00108">bbufferCreate()</a>, <a class="el" href="bbuffer_8c_source.html#l00147">bbufferDestroy()</a>, <a class="el" href="bbuffer_8c_source.html#l00181">bbufferDestroyAndSaveData()</a>, <a class="el" href="bbuffer_8c_source.html#l00239">bbufferRead()</a>, <a class="el" href="bbuffer_8c_source.html#l00368">bbufferWrite()</a>, <a class="el" href="environ_8h_source.html#l00214">CALLOC</a>, <a class="el" href="environ_8h_source.html#l00250">ERROR_PTR</a>, <a class="el" href="environ_8h_source.html#l00216">FREE</a>, <a class="el" href="zlibmem_8c_source.html#l00049">L_BUF_SIZE</a>, <a class="el" href="environ_8h_source.html#l00171">NULL</a>, and <a class="el" href="environ_8h_source.html#l00249">PROCNAME</a>.</p>

<p>Referenced by <a class="el" href="ccbord_8c_source.html#l02324">ccbaReadStream()</a>, and <a class="el" href="buffertest_8c_source.html#l00026">main()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a284afe654a26c44cd5eb54a2c740ec87"></a><!-- doxytag: member="zlibmem.c::L_BUF_SIZE" ref="a284afe654a26c44cd5eb54a2c740ec87" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> <a class="el" href="zlibmem_8c.html#a284afe654a26c44cd5eb54a2c740ec87">L_BUF_SIZE</a> = 32768<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zlibmem_8c_source.html#l00049">49</a> of file <a class="el" href="zlibmem_8c_source.html">zlibmem.c</a>.</p>

<p>Referenced by <a class="el" href="zlibmem_8c_source.html#l00073">zlibCompress()</a>, and <a class="el" href="zlibmem_8c_source.html#l00156">zlibUncompress()</a>.</p>

</div>
</div>
<a class="anchor" id="ad089e2090c179ca2e9c20e2b27def31e"></a><!-- doxytag: member="zlibmem.c::ZLIB_COMPRESSION_LEVEL" ref="ad089e2090c179ca2e9c20e2b27def31e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> <a class="el" href="zlibmem_8c.html#ad089e2090c179ca2e9c20e2b27def31e">ZLIB_COMPRESSION_LEVEL</a> = 6<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zlibmem_8c_source.html#l00050">50</a> of file <a class="el" href="zlibmem_8c_source.html">zlibmem.c</a>.</p>

<p>Referenced by <a class="el" href="zlibmem_8c_source.html#l00073">zlibCompress()</a>.</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="zlibmem_8c.html">zlibmem.c</a>      </li>
      <li class="footer">Generated by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
