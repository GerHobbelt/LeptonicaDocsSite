<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Leptonica: src/rotate.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="moller52-tiny.jpg"></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Leptonica&#160;<span id="projectnumber">1.68</span></div>
   <div id="projectbrief">C Image Processing Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('rotate_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>rotate.c File Reference</h1>  </div>
</div>
<div class="contents">

<p>Top-level image rotation by interpolation and sampling.  
<a href="#_details">More...</a></p>
<div class="textblock"><code>#include &lt;math.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="allheaders_8h_source.html">allheaders.h</a>&quot;</code><br/>
</div>
<p><a href="rotate_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_pix.html">PIX</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rotate_8c.html#a54dece53561c56fe0afd24991a56ef42">pixRotate</a> (<a class="el" href="struct_pix.html">PIX</a> *pixs, <a class="el" href="environ_8h.html#af59419416d96ecf5fca70c8d05adb456">l_float32</a> angle, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> type, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> incolor, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> width, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> height)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_pix.html">PIX</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rotate_8c.html#aa4d965407c65909bcd297994cc83203a">pixEmbedForRotation</a> (<a class="el" href="struct_pix.html">PIX</a> *pixs, <a class="el" href="environ_8h.html#af59419416d96ecf5fca70c8d05adb456">l_float32</a> angle, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> incolor, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> width, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> height)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_pix.html">PIX</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rotate_8c.html#a0bd36c244046b57ae4249c48a9b6b7fb">pixRotateBySampling</a> (<a class="el" href="struct_pix.html">PIX</a> *pixs, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> xcen, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> ycen, <a class="el" href="environ_8h.html#af59419416d96ecf5fca70c8d05adb456">l_float32</a> angle, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> incolor)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_pix.html">PIX</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rotate_8c.html#a8d97c782e16b3b557d10bd3fedc6a8dc">pixRotateBinaryNice</a> (<a class="el" href="struct_pix.html">PIX</a> *pixs, <a class="el" href="environ_8h.html#af59419416d96ecf5fca70c8d05adb456">l_float32</a> angle, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> incolor)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_pix.html">PIX</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rotate_8c.html#a94e50afbda469d086548134fadb3b305">pixRotateWithAlpha</a> (<a class="el" href="struct_pix.html">PIX</a> *pixs, <a class="el" href="environ_8h.html#af59419416d96ecf5fca70c8d05adb456">l_float32</a> angle, <a class="el" href="struct_pix.html">PIX</a> *pixg, <a class="el" href="environ_8h.html#af59419416d96ecf5fca70c8d05adb456">l_float32</a> fract)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_pix.html">PIX</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rotate_8c.html#a75ef10cb1736d03801e86a3eed934274">pixRotateGammaXform</a> (<a class="el" href="struct_pix.html">PIX</a> *pixs, <a class="el" href="environ_8h.html#af59419416d96ecf5fca70c8d05adb456">l_float32</a> gamma, <a class="el" href="environ_8h.html#af59419416d96ecf5fca70c8d05adb456">l_float32</a> angle, <a class="el" href="environ_8h.html#af59419416d96ecf5fca70c8d05adb456">l_float32</a> fract)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="environ_8h.html#af59419416d96ecf5fca70c8d05adb456">l_float32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rotate_8c.html#a073f1588e24855b59dcdd87afe3b6e6f">AlphaMaskBorderVals</a> [2]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="environ_8h.html#af59419416d96ecf5fca70c8d05adb456">l_float32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rotate_8c.html#a01a5342a18c646b78b5409639d3cabd3">VERY_SMALL_ANGLE</a> = 0.001</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Top-level image rotation by interpolation and sampling. </p>
<div class="fragment"><pre class="fragment">   General rotation about <a class="code" href="colorquant__reg_8c.html#aabec89bef1d1e1f9faf4e7d2e685c317">image</a> center
            <a class="code" href="struct_pix.html">PIX</a>     *<a class="code" href="leptprotos_8h.html#a9192aad958bf344380e073069b36e44a">pixRotate</a>()
            <a class="code" href="struct_pix.html">PIX</a>     *<a class="code" href="leptprotos_8h.html#aa3c27f8ca60a5ebc05e1c18316e6b204">pixEmbedForRotation</a>()

   General rotation by sampling
            <a class="code" href="struct_pix.html">PIX</a>     *<a class="code" href="leptprotos_8h.html#a59a9a68e38a08eeded61e90fbbb04640">pixRotateBySampling</a>()

   Nice (slow) rotation of 1 bpp <a class="code" href="colorquant__reg_8c.html#aabec89bef1d1e1f9faf4e7d2e685c317">image</a>
            <a class="code" href="struct_pix.html">PIX</a>     *<a class="code" href="leptprotos_8h.html#a70600f9e62b26fca61cce3be0e3d01d2">pixRotateBinaryNice</a>()

   Rotation including alpha (blend) component and gamma transform
            <a class="code" href="struct_pix.html">PIX</a>     *<a class="code" href="leptprotos_8h.html#a6b14bde7618a5199821f1084faecefce">pixRotateWithAlpha</a>()
            <a class="code" href="struct_pix.html">PIX</a>     *<a class="code" href="leptprotos_8h.html#a1ed5c71319914c8dc19b7955146de8ad">pixRotateGammaXform</a>()

   Rotations are measured in radians; clockwise is positive.

   The general rotation <a class="code" href="leptprotos_8h.html#a9192aad958bf344380e073069b36e44a">pixRotate</a>() does the best job for
   rotating about the <a class="code" href="colorquant__reg_8c.html#aabec89bef1d1e1f9faf4e7d2e685c317">image</a> center.  For 1 bpp, it uses shear;
   for others, it uses either shear or area mapping.
   If requested, it expands the output <a class="code" href="colorquant__reg_8c.html#aabec89bef1d1e1f9faf4e7d2e685c317">image</a> so that no pixels are lost
   in the rotation, and this can be done on multiple successive shears
   without expanding beyond the maximum necessary <a class="code" href="warper__reg_8c.html#a711275dc7bbe85bb6fa721bc60b8637c">size</a>.
</pre></div> 
<p>Definition in file <a class="el" href="rotate_8c_source.html">rotate.c</a>.</p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a54dece53561c56fe0afd24991a56ef42"></a><!-- doxytag: member="rotate.c::pixRotate" ref="a54dece53561c56fe0afd24991a56ef42" args="(PIX *pixs, l_float32 angle, l_int32 type, l_int32 incolor, l_int32 width, l_int32 height)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_pix.html">PIX</a>* pixRotate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pix.html">PIX</a> *&#160;</td>
          <td class="paramname"><em>pixs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#af59419416d96ecf5fca70c8d05adb456">l_float32</a>&#160;</td>
          <td class="paramname"><em>angle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>incolor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>height</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="leptprotos_8h.html#a9192aad958bf344380e073069b36e44a">pixRotate()</a></p>
<p>Input: pixs (1, 2, 4, 8, 32 bpp rgb) angle (radians; clockwise is positive) type (L_ROTATE_AREA_MAP, L_ROTATE_SHEAR, L_ROTATE_SAMPLING) incolor (L_BRING_IN_WHITE, L_BRING_IN_BLACK) width (original width; use 0 to avoid embedding) height (original height; use 0 to avoid embedding) Return: pixd, or null on error</p>
<p>Notes: (1) Rotation is about the center of the image. (2) For very small rotations, just return a clone. (3) Rotation brings either white or black pixels in from outside the image. (4) Above 20 degrees, if rotation by shear is requested, we rotate by sampling. (5) Colormaps are removed for rotation by area map and shear. (6) The dest can be expanded so that no image pixels are lost. To invoke expansion, input the original width and height. For repeated rotation, use of the original width and height allows the expansion to stop at the maximum required size, which is a square with side = sqrt(w*w + h*h).</p>
<p>*** Warning: implicit assumption about RGB component ordering *** </p>

<p>Definition at line <a class="el" href="rotate_8c_source.html#l00083">83</a> of file <a class="el" href="rotate_8c_source.html">rotate.c</a>.</p>

<p>References <a class="el" href="environ_8h_source.html#l00250">ERROR_PTR</a>, <a class="el" href="environ_8h_source.html#l00179">FALSE</a>, <a class="el" href="environ_8h_source.html#l00159">L_ABS</a>, <a class="el" href="pix_8h_source.html#l00695">L_BRING_IN_BLACK</a>, <a class="el" href="pix_8h_source.html#l00694">L_BRING_IN_WHITE</a>, <a class="el" href="pix_8h_source.html#l00688">L_ROTATE_AREA_MAP</a>, <a class="el" href="pix_8h_source.html#l00690">L_ROTATE_SAMPLING</a>, <a class="el" href="pix_8h_source.html#l00689">L_ROTATE_SHEAR</a>, <a class="el" href="environ_8h_source.html#l00257">L_WARNING</a>, <a class="el" href="environ_8h_source.html#l00171">NULL</a>, <a class="el" href="pix1_8c_source.html#l00440">pixClone()</a>, <a class="el" href="colormap_8c_source.html#l00446">pixcmapAddBlackOrWhite()</a>, <a class="el" href="pixconv_8c_source.html#l02297">pixConvertTo8()</a>, <a class="el" href="pix1_8c_source.html#l00466">pixDestroy()</a>, <a class="el" href="rotate_8c_source.html#l00217">pixEmbedForRotation()</a>, <a class="el" href="pix1_8c_source.html#l01288">pixGetColormap()</a>, <a class="el" href="pix1_8c_source.html#l00863">pixGetDepth()</a>, <a class="el" href="pix1_8c_source.html#l00898">pixGetDimensions()</a>, <a class="el" href="pixconv_8c_source.html#l00223">pixRemoveColormap()</a>, <a class="el" href="rotateam_8c_source.html#l00171">pixRotateAMColor()</a>, <a class="el" href="rotateam_8c_source.html#l00216">pixRotateAMGray()</a>, <a class="el" href="rotate_8c_source.html#l00292">pixRotateBySampling()</a>, <a class="el" href="rotateshear_8c_source.html#l00371">pixRotateShearCenter()</a>, <a class="el" href="environ_8h_source.html#l00249">PROCNAME</a>, <a class="el" href="pix_8h_source.html#l00181">REMOVE_CMAP_BASED_ON_SRC</a>, and <a class="el" href="rotate_8c_source.html#l00048">VERY_SMALL_ANGLE</a>.</p>

<p>Referenced by <a class="el" href="rotatetest1_8c_source.html#l00030">main()</a>, <a class="el" href="readbarcode_8c_source.html#l00487">pixDeskewBarcode()</a>, <a class="el" href="skew_8c_source.html#l00222">pixDeskewGeneral()</a>, <a class="el" href="rotate_8c_source.html#l00492">pixRotateWithAlpha()</a>, <a class="el" href="rotatetest2_8c_source.html#l00074">rotateTest()</a>, and <a class="el" href="rotate1__reg_8c_source.html#l00100">RotateTest()</a>.</p>

</div>
</div>
<a class="anchor" id="aa4d965407c65909bcd297994cc83203a"></a><!-- doxytag: member="rotate.c::pixEmbedForRotation" ref="aa4d965407c65909bcd297994cc83203a" args="(PIX *pixs, l_float32 angle, l_int32 incolor, l_int32 width, l_int32 height)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_pix.html">PIX</a>* pixEmbedForRotation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pix.html">PIX</a> *&#160;</td>
          <td class="paramname"><em>pixs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#af59419416d96ecf5fca70c8d05adb456">l_float32</a>&#160;</td>
          <td class="paramname"><em>angle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>incolor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>height</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="leptprotos_8h.html#aa3c27f8ca60a5ebc05e1c18316e6b204">pixEmbedForRotation()</a></p>
<p>Input: pixs (1, 2, 4, 8, 32 bpp rgb) angle (radians; clockwise is positive) incolor (L_BRING_IN_WHITE, L_BRING_IN_BLACK) width (original width; use 0 to avoid embedding) height (original height; use 0 to avoid embedding) Return: pixd, or null on error</p>
<p>Notes: (1) For very small rotations, just return a clone. (2) Generate larger image to embed pixs if necessary, and place in the center. (3) Rotation brings either white or black pixels in from outside the image. For colormapped images where there is no white or black, a new color is added if possible for these pixels; otherwise, either the lightest or darkest color is used. In most cases, the colormap will be removed prior to rotation. (4) The dest is to be expanded so that no image pixels are lost after rotation. Input of the original width and height allows the expansion to stop at the maximum required size, which is a square with side equal to sqrt(w*w + h*h). (5) For an arbitrary angle, the expansion can be found by considering the UL and UR corners. As the image is rotated, these move in an arc centered at the center of the image. Normalize to a unit circle by dividing by half the image diagonal. After a rotation of T radians, the UL and UR corners are at points T radians along the unit circle. Compute the x and y coordinates of both these points and take the max of absolute values; these represent the half width and half height of the containing rectangle. The arithmetic is done using formulas for sin(a+b) and cos(a+b), where b = T. For the UR corner, sin(a) = h/d and cos(a) = w/d. For the UL corner, replace a by (pi - a), and you have sin(pi - a) = h/d, cos(pi - a) = -w/d. The equations given below follow directly. </p>

<p>Definition at line <a class="el" href="rotate_8c_source.html#l00217">217</a> of file <a class="el" href="rotate_8c_source.html">rotate.c</a>.</p>

<p>References <a class="el" href="environ_8h_source.html#l00250">ERROR_PTR</a>, <a class="el" href="environ_8h_source.html#l00159">L_ABS</a>, <a class="el" href="pix_8h_source.html#l00695">L_BRING_IN_BLACK</a>, <a class="el" href="pix_8h_source.html#l00694">L_BRING_IN_WHITE</a>, <a class="el" href="environ_8h_source.html#l00155">L_MAX</a>, <a class="el" href="pix_8h_source.html#l00731">L_SET_BLACK</a>, <a class="el" href="pix_8h_source.html#l00730">L_SET_WHITE</a>, <a class="el" href="environ_8h_source.html#l00171">NULL</a>, <a class="el" href="pix_8h_source.html#l00243">PIX_SRC</a>, <a class="el" href="pix1_8c_source.html#l00440">pixClone()</a>, <a class="el" href="pix1_8c_source.html#l00647">pixCopyColormap()</a>, <a class="el" href="pix1_8c_source.html#l01114">pixCopyResolution()</a>, <a class="el" href="pix1_8c_source.html#l01270">pixCopyText()</a>, <a class="el" href="pix1_8c_source.html#l00269">pixCreate()</a>, <a class="el" href="pix1_8c_source.html#l00898">pixGetDimensions()</a>, <a class="el" href="rop_8c_source.html#l00180">pixRasterop()</a>, <a class="el" href="pix2_8c_source.html#l00735">pixSetBlackOrWhite()</a>, <a class="el" href="environ_8h_source.html#l00249">PROCNAME</a>, and <a class="el" href="rotate_8c_source.html#l00048">VERY_SMALL_ANGLE</a>.</p>

<p>Referenced by <a class="el" href="rotate_8c_source.html#l00083">pixRotate()</a>.</p>

</div>
</div>
<a class="anchor" id="a0bd36c244046b57ae4249c48a9b6b7fb"></a><!-- doxytag: member="rotate.c::pixRotateBySampling" ref="a0bd36c244046b57ae4249c48a9b6b7fb" args="(PIX *pixs, l_int32 xcen, l_int32 ycen, l_float32 angle, l_int32 incolor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_pix.html">PIX</a>* pixRotateBySampling </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pix.html">PIX</a> *&#160;</td>
          <td class="paramname"><em>pixs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>xcen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>ycen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#af59419416d96ecf5fca70c8d05adb456">l_float32</a>&#160;</td>
          <td class="paramname"><em>angle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>incolor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="leptprotos_8h.html#a59a9a68e38a08eeded61e90fbbb04640">pixRotateBySampling()</a></p>
<p>Input: pixs (1, 2, 4, 8, 16, 32 bpp rgb; can be cmapped) xcen (x value of center of rotation) ycen (y value of center of rotation) angle (radians; clockwise is positive) incolor (L_BRING_IN_WHITE, L_BRING_IN_BLACK) Return: pixd, or null on error</p>
<p>Notes: (1) For very small rotations, just return a clone. (2) Rotation brings either white or black pixels in from outside the image. (3) Colormaps are retained. </p>

<p>Definition at line <a class="el" href="rotate_8c_source.html#l00292">292</a> of file <a class="el" href="rotate_8c_source.html">rotate.c</a>.</p>

<p>References <a class="el" href="arrayaccess_8h_source.html#l00066">CLEAR_DATA_BIT</a>, <a class="el" href="environ_8h_source.html#l00250">ERROR_PTR</a>, <a class="el" href="environ_8h_source.html#l00216">FREE</a>, <a class="el" href="arrayaccess_8h_source.html#l00060">GET_DATA_BIT</a>, <a class="el" href="arrayaccess_8h_source.html#l00118">GET_DATA_BYTE</a>, <a class="el" href="arrayaccess_8h_source.html#l00080">GET_DATA_DIBIT</a>, <a class="el" href="arrayaccess_8h_source.html#l00154">GET_DATA_FOUR_BYTES</a>, <a class="el" href="arrayaccess_8h_source.html#l00097">GET_DATA_QBIT</a>, <a class="el" href="arrayaccess_8h_source.html#l00138">GET_DATA_TWO_BYTES</a>, <a class="el" href="environ_8h_source.html#l00159">L_ABS</a>, <a class="el" href="pix_8h_source.html#l00695">L_BRING_IN_BLACK</a>, <a class="el" href="pix_8h_source.html#l00694">L_BRING_IN_WHITE</a>, <a class="el" href="environ_8h_source.html#l00171">NULL</a>, <a class="el" href="pix1_8c_source.html#l00440">pixClone()</a>, <a class="el" href="pix1_8c_source.html#l00356">pixCreateTemplateNoInit()</a>, <a class="el" href="pix1_8c_source.html#l01358">pixGetData()</a>, <a class="el" href="pix1_8c_source.html#l00898">pixGetDimensions()</a>, <a class="el" href="pix1_8c_source.html#l01527">pixGetLinePtrs()</a>, <a class="el" href="pix1_8c_source.html#l00970">pixGetWpl()</a>, <a class="el" href="pix2_8c_source.html#l00735">pixSetBlackOrWhite()</a>, <a class="el" href="environ_8h_source.html#l00249">PROCNAME</a>, <a class="el" href="arrayaccess_8h_source.html#l00063">SET_DATA_BIT</a>, <a class="el" href="arrayaccess_8h_source.html#l00126">SET_DATA_BYTE</a>, <a class="el" href="arrayaccess_8h_source.html#l00083">SET_DATA_DIBIT</a>, <a class="el" href="arrayaccess_8h_source.html#l00157">SET_DATA_FOUR_BYTES</a>, <a class="el" href="arrayaccess_8h_source.html#l00100">SET_DATA_QBIT</a>, <a class="el" href="arrayaccess_8h_source.html#l00146">SET_DATA_TWO_BYTES</a>, and <a class="el" href="rotate_8c_source.html#l00048">VERY_SMALL_ANGLE</a>.</p>

<p>Referenced by <a class="el" href="skew__reg_8c_source.html#l00042">main()</a>, and <a class="el" href="rotate_8c_source.html#l00083">pixRotate()</a>.</p>

</div>
</div>
<a class="anchor" id="a8d97c782e16b3b557d10bd3fedc6a8dc"></a><!-- doxytag: member="rotate.c::pixRotateBinaryNice" ref="a8d97c782e16b3b557d10bd3fedc6a8dc" args="(PIX *pixs, l_float32 angle, l_int32 incolor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_pix.html">PIX</a>* pixRotateBinaryNice </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pix.html">PIX</a> *&#160;</td>
          <td class="paramname"><em>pixs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#af59419416d96ecf5fca70c8d05adb456">l_float32</a>&#160;</td>
          <td class="paramname"><em>angle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>incolor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="leptprotos_8h.html#a70600f9e62b26fca61cce3be0e3d01d2">pixRotateBinaryNice()</a></p>
<p>Input: pixs (1 bpp) angle (radians; clockwise is positive; about the center) incolor (L_BRING_IN_WHITE, L_BRING_IN_BLACK) Return: pixd, or null on error</p>
<p>Notes: (1) For very small rotations, just return a clone. (2) This does a computationally expensive rotation of 1 bpp images. The fastest rotators (using shears or subsampling) leave visible horizontal and vertical shear lines across which the image shear changes by one pixel. To ameliorate the visual effect one can introduce random dithering. One way to do this in a not-too-random fashion is given here. We convert to 8 bpp, do a very small blur, rotate using linear interpolation (same as area mapping), do a small amount of sharpening to compensate for the initial blur, and threshold back to binary. The shear lines are magically removed. (3) This operation is about 5x slower than rotation by sampling. </p>

<p>Definition at line <a class="el" href="rotate_8c_source.html#l00424">424</a> of file <a class="el" href="rotate_8c_source.html">rotate.c</a>.</p>

<p>References <a class="el" href="environ_8h_source.html#l00250">ERROR_PTR</a>, <a class="el" href="pix_8h_source.html#l00695">L_BRING_IN_BLACK</a>, <a class="el" href="pix_8h_source.html#l00694">L_BRING_IN_WHITE</a>, <a class="el" href="environ_8h_source.html#l00171">NULL</a>, <a class="el" href="convolve_8c_source.html#l00091">pixBlockconv()</a>, <a class="el" href="pixconv_8c_source.html#l02297">pixConvertTo8()</a>, <a class="el" href="pix1_8c_source.html#l00466">pixDestroy()</a>, <a class="el" href="pix1_8c_source.html#l00863">pixGetDepth()</a>, <a class="el" href="rotateam_8c_source.html#l00110">pixRotateAM()</a>, <a class="el" href="grayquant_8c_source.html#l00217">pixThresholdToBinary()</a>, <a class="el" href="enhance_8c_source.html#l00866">pixUnsharpMasking()</a>, and <a class="el" href="environ_8h_source.html#l00249">PROCNAME</a>.</p>

</div>
</div>
<a class="anchor" id="a94e50afbda469d086548134fadb3b305"></a><!-- doxytag: member="rotate.c::pixRotateWithAlpha" ref="a94e50afbda469d086548134fadb3b305" args="(PIX *pixs, l_float32 angle, PIX *pixg, l_float32 fract)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_pix.html">PIX</a>* pixRotateWithAlpha </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pix.html">PIX</a> *&#160;</td>
          <td class="paramname"><em>pixs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#af59419416d96ecf5fca70c8d05adb456">l_float32</a>&#160;</td>
          <td class="paramname"><em>angle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_pix.html">PIX</a> *&#160;</td>
          <td class="paramname"><em>pixg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#af59419416d96ecf5fca70c8d05adb456">l_float32</a>&#160;</td>
          <td class="paramname"><em>fract</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="leptprotos_8h.html#a6b14bde7618a5199821f1084faecefce">pixRotateWithAlpha()</a></p>
<p>Input: pixs (32 bpp rgb) angle (radians; clockwise is positive) pixg (&lt;optional&gt; 8 bpp, can be null) fract (between 0.0 and 1.0, with 0.0 fully transparent and 1.0 fully opaque) Return: pixd, or null on error</p>
<p>Notes: (1) The alpha channel is transformed separately from pixs, and aligns with it, being fully transparent outside the boundary of the transformed pixs. For pixels that are fully transparent, a blending function like <a class="el" href="blend_8c.html#a51d08d3ae19c515a5fabf42db1daf85b">pixBlendWithGrayMask()</a> will give zero weight to corresponding pixels in pixs. (2) Rotation is about the center of the image; for very small rotations, just return a clone. The dest is automatically expanded so that no image pixels are lost. (3) Rotation is by area mapping. It doesn't matter what color is brought in because the alpha channel will be transparent (black) there. (4) If pixg is NULL, it is generated as an alpha layer that is partially opaque, using . Otherwise, it is cropped to pixs if required and  is ignored. The alpha channel in pixs is never used. (4) Colormaps are removed. (5) The default setting for the border values in the alpha channel is 0 (transparent) for the outermost ring of pixels and (0.5 * fract * 255) for the second ring. When blended over a second image, this (a) shrinks the visible image to make a clean overlap edge with an image below, and (b) softens the edges by weakening the aliasing there. Use <a class="el" href="leptprotos_8h.html#ab264c4aa44066ad46ebe2294b8bb523b">l_setAlphaMaskBorder()</a> to change these values.</p>
<p>*** Warning: implicit assumption about RGB component ordering *** </p>

<p>Definition at line <a class="el" href="rotate_8c_source.html#l00492">492</a> of file <a class="el" href="rotate_8c_source.html">rotate.c</a>.</p>

<p>References <a class="el" href="pix2_8c_source.html#l00117">AlphaMaskBorderVals</a>, <a class="el" href="environ_8h_source.html#l00250">ERROR_PTR</a>, <a class="el" href="pix_8h_source.html#l00146">L_ALPHA_CHANNEL</a>, <a class="el" href="pix_8h_source.html#l00695">L_BRING_IN_BLACK</a>, <a class="el" href="pix_8h_source.html#l00694">L_BRING_IN_WHITE</a>, <a class="el" href="pix_8h_source.html#l00688">L_ROTATE_AREA_MAP</a>, <a class="el" href="environ_8h_source.html#l00257">L_WARNING</a>, <a class="el" href="environ_8h_source.html#l00171">NULL</a>, <a class="el" href="pix1_8c_source.html#l00269">pixCreate()</a>, <a class="el" href="pix1_8c_source.html#l00466">pixDestroy()</a>, <a class="el" href="pix1_8c_source.html#l01288">pixGetColormap()</a>, <a class="el" href="pix1_8c_source.html#l00863">pixGetDepth()</a>, <a class="el" href="pix1_8c_source.html#l00898">pixGetDimensions()</a>, <a class="el" href="pix5_8c_source.html#l00835">pixResizeToMatch()</a>, <a class="el" href="rotate_8c_source.html#l00083">pixRotate()</a>, <a class="el" href="pix2_8c_source.html#l00625">pixSetAll()</a>, <a class="el" href="pix2_8c_source.html#l00661">pixSetAllArbitrary()</a>, <a class="el" href="pix2_8c_source.html#l01313">pixSetBorderRingVal()</a>, <a class="el" href="pix2_8c_source.html#l01940">pixSetRGBComponent()</a>, and <a class="el" href="environ_8h_source.html#l00249">PROCNAME</a>.</p>

<p>Referenced by <a class="el" href="alphaxform__reg_8c_source.html#l00054">main()</a>, and <a class="el" href="rotate_8c_source.html#l00567">pixRotateGammaXform()</a>.</p>

</div>
</div>
<a class="anchor" id="a75ef10cb1736d03801e86a3eed934274"></a><!-- doxytag: member="rotate.c::pixRotateGammaXform" ref="a75ef10cb1736d03801e86a3eed934274" args="(PIX *pixs, l_float32 gamma, l_float32 angle, l_float32 fract)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_pix.html">PIX</a>* pixRotateGammaXform </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pix.html">PIX</a> *&#160;</td>
          <td class="paramname"><em>pixs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#af59419416d96ecf5fca70c8d05adb456">l_float32</a>&#160;</td>
          <td class="paramname"><em>gamma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#af59419416d96ecf5fca70c8d05adb456">l_float32</a>&#160;</td>
          <td class="paramname"><em>angle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#af59419416d96ecf5fca70c8d05adb456">l_float32</a>&#160;</td>
          <td class="paramname"><em>fract</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="leptprotos_8h.html#a1ed5c71319914c8dc19b7955146de8ad">pixRotateGammaXform()</a></p>
<p>Input: pixs (32 bpp rgb) gamma (gamma correction; must be &gt; 0.0) angle (radians; clockwise is positive) fract (between 0.0 and 1.0, with 1.0 fully transparent) Return: pixd, or null on error</p>
<p>Notes: (1) This wraps a gamma/inverse-gamma photometric transform around <a class="el" href="leptprotos_8h.html#a6b14bde7618a5199821f1084faecefce">pixRotateWithAlpha()</a>. (2) For usage, see notes in <a class="el" href="leptprotos_8h.html#a6b14bde7618a5199821f1084faecefce">pixRotateWithAlpha()</a> and <a class="el" href="enhance_8c.html#ade289b100cd6316d6ef34d40beb375c2">pixGammaTRCWithAlpha()</a>. (3) The basic idea of a gamma/inverse-gamma transform is to remove gamma correction before rotating and restore it afterward. The effects can be subtle, but important for some applications. For example, using gamma &gt; 1.0 will cause the dark areas to become somewhat lighter and slightly reduce aliasing effects when blending using the alpha channel. </p>

<p>Definition at line <a class="el" href="rotate_8c_source.html#l00567">567</a> of file <a class="el" href="rotate_8c_source.html">rotate.c</a>.</p>

<p>References <a class="el" href="environ_8h_source.html#l00250">ERROR_PTR</a>, <a class="el" href="environ_8h_source.html#l00257">L_WARNING</a>, <a class="el" href="environ_8h_source.html#l00171">NULL</a>, <a class="el" href="pix1_8c_source.html#l00466">pixDestroy()</a>, <a class="el" href="enhance_8c_source.html#l00281">pixGammaTRCWithAlpha()</a>, <a class="el" href="pix1_8c_source.html#l00863">pixGetDepth()</a>, <a class="el" href="rotate_8c_source.html#l00492">pixRotateWithAlpha()</a>, and <a class="el" href="environ_8h_source.html#l00249">PROCNAME</a>.</p>

<p>Referenced by <a class="el" href="alphaxform__reg_8c_source.html#l00054">main()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a073f1588e24855b59dcdd87afe3b6e6f"></a><!-- doxytag: member="rotate.c::AlphaMaskBorderVals" ref="a073f1588e24855b59dcdd87afe3b6e6f" args="[2]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="environ_8h.html#af59419416d96ecf5fca70c8d05adb456">l_float32</a> <a class="el" href="scale_8c.html#a073f1588e24855b59dcdd87afe3b6e6f">AlphaMaskBorderVals</a>[2]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pix2_8c_source.html#l00117">117</a> of file <a class="el" href="pix2_8c_source.html">pix2.c</a>.</p>

</div>
</div>
<a class="anchor" id="a01a5342a18c646b78b5409639d3cabd3"></a><!-- doxytag: member="rotate.c::VERY_SMALL_ANGLE" ref="a01a5342a18c646b78b5409639d3cabd3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="environ_8h.html#af59419416d96ecf5fca70c8d05adb456">l_float32</a> <a class="el" href="rotatefastalt_8c.html#a01a5342a18c646b78b5409639d3cabd3">VERY_SMALL_ANGLE</a> = 0.001<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rotate_8c_source.html#l00048">48</a> of file <a class="el" href="rotate_8c_source.html">rotate.c</a>.</p>

<p>Referenced by <a class="el" href="rotate_8c_source.html#l00217">pixEmbedForRotation()</a>, <a class="el" href="rotate_8c_source.html#l00083">pixRotate()</a>, and <a class="el" href="rotate_8c_source.html#l00292">pixRotateBySampling()</a>.</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="rotate_8c.html">rotate.c</a>      </li>
      <li class="footer">Generated by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
