<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Leptonica: src/watershed.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="moller52-tiny.jpg"></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Leptonica&#160;<span id="projectnumber">1.68</span></div>
   <div id="projectbrief">C Image Processing Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('watershed_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>watershed.c File Reference</h1>  </div>
</div>
<div class="contents">

<p>Find watershed basins from specified seeds in grayscale image.  
<a href="#_details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="allheaders_8h_source.html">allheaders.h</a>&quot;</code><br/>
</div>
<p><a href="watershed_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_l___new_pixel.html">L_NewPixel</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_l___w_s_pixel.html">L_WSPixel</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="watershed_8c.html#a5f929ee6e3248db11c050861cf9c169e">DEBUG_WATERSHED</a>&#160;&#160;&#160;0</td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_l___new_pixel.html">L_NewPixel</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="watershed_8c.html#a5d631fea083f926044e3ec3f6c04424d">L_NEWPIXEL</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_l___w_s_pixel.html">L_WSPixel</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="watershed_8c.html#a1d482bfdafc7417528f98344e43e3112">L_WSPIXEL</a></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="watershed_8c.html#ae194ed85e7640cbac98ce57838054a5c">wshedSaveBasin</a> (<a class="el" href="struct_l___w_shed.html">L_WSHED</a> *wshed, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> index, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> level)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="watershed_8c.html#a61bde1bc4b4694dc7e3928ef55c39af7">identifyWatershedBasin</a> (<a class="el" href="struct_l___w_shed.html">L_WSHED</a> *wshed, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> index, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> level, <a class="el" href="struct_box.html">BOX</a> **pbox, <a class="el" href="struct_pix.html">PIX</a> **ppixd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="watershed_8c.html#ac7d27902df99928b86f913ce9a71eaa9">mergeLookup</a> (<a class="el" href="struct_l___w_shed.html">L_WSHED</a> *wshed, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> sindex, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> dindex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="watershed_8c.html#a3a0c609aaabd7735a16ecbe3bb4257d1">wshedGetHeight</a> (<a class="el" href="struct_l___w_shed.html">L_WSHED</a> *wshed, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> val, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> label, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *pheight)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="watershed_8c.html#a3425b9cae6b2e120f0728b383bfef50b">pushNewPixel</a> (<a class="el" href="struct_l___queue.html">L_QUEUE</a> *lq, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> x, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> y, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *pminx, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *pmaxx, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *pminy, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *pmaxy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="watershed_8c.html#a3ca651df9c77227899bb748e71d4a5c5">popNewPixel</a> (<a class="el" href="struct_l___queue.html">L_QUEUE</a> *lq, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *px, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *py)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="watershed_8c.html#aa980f5908953b2a22fcf9c6481f2f9c6">pushWSPixel</a> (<a class="el" href="struct_l___heap.html">L_HEAP</a> *lh, <a class="el" href="struct_l___stack.html">L_STACK</a> *stack, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> val, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> x, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> y, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="watershed_8c.html#a6d741c3c8b7ee7c0875c4ead4fb5320b">popWSPixel</a> (<a class="el" href="struct_l___heap.html">L_HEAP</a> *lh, <a class="el" href="struct_l___stack.html">L_STACK</a> *stack, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *pval, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *px, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *py, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *pindex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="watershed_8c.html#a78c5ce9a13fa18c53b0978a169cfabbe">debugPrintLUT</a> (<a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *lut, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> <a class="el" href="warper__reg_8c.html#a711275dc7bbe85bb6fa721bc60b8637c">size</a>, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> debug)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="watershed_8c.html#a67c62f50705600095088865dc9e2123b">debugWshedMerge</a> (<a class="el" href="struct_l___w_shed.html">L_WSHED</a> *wshed, char *descr, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> x, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> y, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> label, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_l___w_shed.html">L_WSHED</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="watershed_8c.html#a68bff1b7823ce81b1f8762a66eaed181">wshedCreate</a> (<a class="el" href="struct_pix.html">PIX</a> *pixs, <a class="el" href="struct_pix.html">PIX</a> *pixm, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> mindepth, <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> debugflag)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="watershed_8c.html#a9f09dce887ebbfd83bfb757f39d063d2">wshedDestroy</a> (<a class="el" href="struct_l___w_shed.html">L_WSHED</a> **pwshed)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="watershed_8c.html#aede616b788436bd54e192e918b8ccd92">wshedApply</a> (<a class="el" href="struct_l___w_shed.html">L_WSHED</a> *wshed)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="watershed_8c.html#a50c8a37adc1829477e0f1da0f8fb9528">wshedBasins</a> (<a class="el" href="struct_l___w_shed.html">L_WSHED</a> *wshed, <a class="el" href="struct_pixa.html">PIXA</a> **ppixa, <a class="el" href="struct_numa.html">NUMA</a> **pnalevels)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_pix.html">PIX</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="watershed_8c.html#a293a9841804a565cb6041c927d3a11e5">wshedRenderFill</a> (<a class="el" href="struct_l___w_shed.html">L_WSHED</a> *wshed)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_pix.html">PIX</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="watershed_8c.html#af2d81f85f2d1b43e5c73a501e8ae3c72">wshedRenderColors</a> (<a class="el" href="struct_l___w_shed.html">L_WSHED</a> *wshed)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="environ_8h.html#a4d4d7254020fc95aef5dde8884405358">l_uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="watershed_8c.html#a668ddf9d750838914ecd3d0cfa91ce19">MAX_LABEL_VALUE</a> = 0x7fffffff</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Find watershed basins from specified seeds in grayscale image. </p>
<div class="fragment"><pre class="fragment">    Top-level
          <a class="code" href="struct_l___w_shed.html">L_WSHED</a>         *<a class="code" href="leptprotos_8h.html#a0524659ec775f8d4bf08dd51f47a3c42">wshedCreate</a>()
          void             <a class="code" href="leptprotos_8h.html#a5ec30434017f7d517fe0df4ea5242713">wshedDestroy</a>()
          <a class="code" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>          <a class="code" href="leptprotos_8h.html#a0328fbb3fb44dae48502b332387bd215">wshedApply</a>()

    Helpers
          static <a class="code" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>   <a class="code" href="watershed_8c.html#a61bde1bc4b4694dc7e3928ef55c39af7">identifyWatershedBasin</a>()
          static <a class="code" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>   <a class="code" href="watershed_8c.html#ac7d27902df99928b86f913ce9a71eaa9">mergeLookup</a>()
          static <a class="code" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>   <a class="code" href="watershed_8c.html#a3a0c609aaabd7735a16ecbe3bb4257d1">wshedGetHeight</a>()
          static <span class="keywordtype">void</span>      <a class="code" href="watershed_8c.html#a3425b9cae6b2e120f0728b383bfef50b">pushNewPixel</a>()
          static <span class="keywordtype">void</span>      <a class="code" href="watershed_8c.html#a3ca651df9c77227899bb748e71d4a5c5">popNewPixel</a>()
          static <span class="keywordtype">void</span>      <a class="code" href="watershed_8c.html#aa980f5908953b2a22fcf9c6481f2f9c6">pushWSPixel</a>()
          static <span class="keywordtype">void</span>      <a class="code" href="watershed_8c.html#a6d741c3c8b7ee7c0875c4ead4fb5320b">popWSPixel</a>()
          static <span class="keywordtype">void</span>      <a class="code" href="watershed_8c.html#a78c5ce9a13fa18c53b0978a169cfabbe">debugPrintLUT</a>()
          static <span class="keywordtype">void</span>      <a class="code" href="watershed_8c.html#a67c62f50705600095088865dc9e2123b">debugWshedMerge</a>()

    Output
          <a class="code" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>          <a class="code" href="leptprotos_8h.html#abe2725699dbe9dc70b44ce275656f2b5">wshedBasins</a>()
          <a class="code" href="struct_pix.html">PIX</a>             *<a class="code" href="leptprotos_8h.html#a51ed87035191dfd0e96a6a829738a29c">wshedRenderFill</a>()
          <a class="code" href="struct_pix.html">PIX</a>             *<a class="code" href="leptprotos_8h.html#ae163fc49ee7bc8b2fed73317b5ebc0b8">wshedRenderColors</a>()

The watershed function identifies the &quot;catch basins&quot; of the input
8 bpp <a class="code" href="colorquant__reg_8c.html#aabec89bef1d1e1f9faf4e7d2e685c317">image</a>, with respect to the specified seeds or &quot;markers&quot;.
The use is in segmentation, but the selection of the markers is
critical to getting meaningful results.

How are the markers selected?  You can&#39;t simply use the local
minima, because a typical image has sufficient noise so that 
a useful catch basin can easily have multiple local minima.  However
they are selected, the question for the watershed function is
how to handle local minima that are not markers.  The reason
this is important is because of the algorithm used to find the
watersheds, which is roughly like this:

  (1) Identify the markers and the local minima, and enter them
      into a priority queue based on the pixel value.  Each marker
      is shrunk to a single pixel, if necessary, before the
      operation starts.
  (2) Feed the priority queue with neighbors of pixels that are
      popped off the queue.  Each of these queue pixels is labelled
      with the <a class="code" href="struct_l___reg_params.html#a6fa45512d6be2dfca4fd0621f3527b08">index</a> value of its parent.
  (3) Each pixel is also labelled, in a 32-bit image, with the marker
      or local minimum <a class="code" href="struct_l___reg_params.html#a6fa45512d6be2dfca4fd0621f3527b08">index</a>, from which it was originally derived.
  (4) There are actually 3 classes of labels: seeds, minima, and
      fillers.  The fillers are labels of regions that have already
      been identified as watersheds and are continuing to fill, for
      the purpose of finding higher watersheds.
  (5) When a pixel is popped that has already been labelled in the
      32-bit image and that label differs from the label of its
      parent (stored in the queue pixel), a boundary has been crossed.
      There are several cases:
       (a) Both parents are derived from markers but at least one
           is not deep enough to become a watershed.  Absorb the
           shallower basin into the deeper one, fixing the LUT to
           redirect the shallower index to the deeper one.
       (b) Both parents are derived from markers and both are deep
           enough.  Identify and save the watershed for each marker.
       (c) One parent was derived from a marker and the other from
           a minima: absorb the minima basin into the marker basin.
       (d) One parent was derived from a marker and the other is
           a filler: identify and save the watershed for the marker.
       (e) Both parents are derived from minima: merge them.
       (f) One parent is a filler and the other is derived from a
           minima: merge the minima into the filler.
  (6) The output of the watershed operation consists of:
       - a pixa of the basins
       - a pta of the markers
       - a numa of the watershed levels

Typical usage:
    <a class="code" href="struct_l___w_shed.html">L_WShed</a> *wshed = <a class="code" href="leptprotos_8h.html#a0524659ec775f8d4bf08dd51f47a3c42">wshedCreate</a>(pixs, pixseed, mindepth, 0);
    <a class="code" href="leptprotos_8h.html#a0328fbb3fb44dae48502b332387bd215">wshedApply</a>(wshed);

    <a class="code" href="leptprotos_8h.html#abe2725699dbe9dc70b44ce275656f2b5">wshedBasins</a>(wshed, &amp;pixa, &amp;nalevels);
      ... do something with pixa, nalevels ...
    <a class="code" href="leptprotos_8h.html#a6775cff91fdef2336a3f3037f7bb55f3">pixaDestroy</a>(&amp;pixa);
    <a class="code" href="leptprotos_8h.html#aba8d7e230092813965301cca699a6ebc">numaDestroy</a>(&amp;nalevels);

    <a class="code" href="struct_pix.html">Pix</a> *pixd = <a class="code" href="leptprotos_8h.html#a51ed87035191dfd0e96a6a829738a29c">wshedRenderFill</a>(wshed);

    <a class="code" href="leptprotos_8h.html#a5ec30434017f7d517fe0df4ea5242713">wshedDestroy</a>(&amp;wshed);
</pre></div> 
<p>Definition in file <a class="el" href="watershed_8c_source.html">watershed.c</a>.</p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="a5f929ee6e3248db11c050861cf9c169e"></a><!-- doxytag: member="watershed.c::DEBUG_WATERSHED" ref="a5f929ee6e3248db11c050861cf9c169e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_WATERSHED&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="watershed_8c_source.html#l00107">107</a> of file <a class="el" href="watershed_8c_source.html">watershed.c</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="a5d631fea083f926044e3ec3f6c04424d"></a><!-- doxytag: member="watershed.c::L_NEWPIXEL" ref="a5d631fea083f926044e3ec3f6c04424d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_l___new_pixel.html">L_NewPixel</a> <a class="el" href="struct_l___new_pixel.html">L_NEWPIXEL</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="watershed_8c_source.html#l00117">117</a> of file <a class="el" href="watershed_8c_source.html">watershed.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1d482bfdafc7417528f98344e43e3112"></a><!-- doxytag: member="watershed.c::L_WSPIXEL" ref="a1d482bfdafc7417528f98344e43e3112" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_l___w_s_pixel.html">L_WSPixel</a> <a class="el" href="struct_l___w_s_pixel.html">L_WSPIXEL</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="watershed_8c_source.html#l00126">126</a> of file <a class="el" href="watershed_8c_source.html">watershed.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ae194ed85e7640cbac98ce57838054a5c"></a><!-- doxytag: member="watershed.c::wshedSaveBasin" ref="ae194ed85e7640cbac98ce57838054a5c" args="(L_WSHED *wshed, l_int32 index, l_int32 level)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void wshedSaveBasin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l___w_shed.html">L_WSHED</a> *&#160;</td>
          <td class="paramname"><em>wshed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="watershed_8c.html#ae194ed85e7640cbac98ce57838054a5c">wshedSaveBasin()</a></p>
<p>Input: wshed index (index of basin to be located) level (filling level reached at the time this function is called) Return: 0 if OK, 1 on error</p>
<p>Notes: (1) This identifies a single watershed. It does not change the LUT, which must be done subsequently. (2) The fill level of a basin is taken to be  - 1. </p>

<p>Definition at line <a class="el" href="watershed_8c_source.html#l00545">545</a> of file <a class="el" href="watershed_8c_source.html">watershed.c</a>.</p>

<p>References <a class="el" href="watershed_8c_source.html#l00588">identifyWatershedBasin()</a>, <a class="el" href="environ_8h_source.html#l00253">L_ERROR</a>, <a class="el" href="pix_8h_source.html#l00596">L_INSERT</a>, <a class="el" href="watershed_8h_source.html#l00042">L_WShed::nalevels</a>, <a class="el" href="numabasic_8c_source.html#l00403">numaAddNumber()</a>, <a class="el" href="pixabasic_8c_source.html#l00525">pixaAddBox()</a>, <a class="el" href="pixabasic_8c_source.html#l00430">pixaAddPix()</a>, <a class="el" href="watershed_8h_source.html#l00037">L_WShed::pixad</a>, and <a class="el" href="environ_8h_source.html#l00249">PROCNAME</a>.</p>

<p>Referenced by <a class="el" href="watershed_8c_source.html#l00290">wshedApply()</a>.</p>

</div>
</div>
<a class="anchor" id="a61bde1bc4b4694dc7e3928ef55c39af7"></a><!-- doxytag: member="watershed.c::identifyWatershedBasin" ref="a61bde1bc4b4694dc7e3928ef55c39af7" args="(L_WSHED *wshed, l_int32 index, l_int32 level, BOX **pbox, PIX **ppixd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> identifyWatershedBasin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l___w_shed.html">L_WSHED</a> *&#160;</td>
          <td class="paramname"><em>wshed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_box.html">BOX</a> **&#160;</td>
          <td class="paramname"><em>pbox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_pix.html">PIX</a> **&#160;</td>
          <td class="paramname"><em>ppixd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="watershed_8c.html#a61bde1bc4b4694dc7e3928ef55c39af7">identifyWatershedBasin()</a></p>
<p>Input: wshed index (index of basin to be located) level (of basin at point at which the two basins met) &amp;box (&lt;return&gt; bounding box of basin) &amp;pixd (&lt;return&gt; pix of basin, cropped to its bounding box) Return: 0 if OK, 1 on error</p>
<p>Notes: (1) This is a static function, so we assume pixlab, pixs and pixt exist and are the same size. (2) It selects all pixels that have the label  in pixlab and that have a value in pixs that is less than . (3) It is used whenever two seeded basins meet (typically at a saddle), or when one seeded basin meets a 'filler'. All identified basins are saved as a watershed. </p>

<p>Definition at line <a class="el" href="watershed_8c_source.html#l00588">588</a> of file <a class="el" href="watershed_8c_source.html">watershed.c</a>.</p>

<p>References <a class="el" href="boxbasic_8c_source.html#l00133">boxCreate()</a>, <a class="el" href="watershed_8h_source.html#l00048">L_WShed::debug</a>, <a class="el" href="environ_8h_source.html#l00251">ERROR_INT</a>, <a class="el" href="arrayaccess_8h_source.html#l00060">GET_DATA_BIT</a>, <a class="el" href="arrayaccess_8h_source.html#l00118">GET_DATA_BYTE</a>, <a class="el" href="arrayaccess_8h_source.html#l00154">GET_DATA_FOUR_BYTES</a>, <a class="el" href="environ_8h_source.html#l00155">L_MAX</a>, <a class="el" href="environ_8h_source.html#l00151">L_MIN</a>, <a class="el" href="watershed_8h_source.html#l00035">L_WShed::linelab32</a>, <a class="el" href="watershed_8h_source.html#l00033">L_WShed::lines8</a>, <a class="el" href="watershed_8h_source.html#l00036">L_WShed::linet1</a>, <a class="el" href="queue_8c_source.html#l00074">lqueueCreate()</a>, <a class="el" href="queue_8c_source.html#l00112">lqueueDestroy()</a>, <a class="el" href="queue_8c_source.html#l00261">lqueueGetCount()</a>, <a class="el" href="stack_8c_source.html#l00064">lstackCreate()</a>, <a class="el" href="watershed_8h_source.html#l00045">L_WShed::lut</a>, <a class="el" href="watershed_8c_source.html#l00110">MAX_LABEL_VALUE</a>, <a class="el" href="environ_8h_source.html#l00171">NULL</a>, <a class="el" href="pix_8h_source.html#l00244">PIX_DST</a>, <a class="el" href="pix_8h_source.html#l00243">PIX_SRC</a>, <a class="el" href="pix5_8c_source.html#l00698">pixClipRectangle()</a>, <a class="el" href="pix1_8c_source.html#l00898">pixGetDimensions()</a>, <a class="el" href="watershed_8h_source.html#l00031">L_WShed::pixlab</a>, <a class="el" href="rop_8c_source.html#l00180">pixRasterop()</a>, <a class="el" href="watershed_8h_source.html#l00028">L_WShed::pixs</a>, <a class="el" href="pix2_8c_source.html#l00219">pixSetPixel()</a>, <a class="el" href="watershed_8h_source.html#l00032">L_WShed::pixt</a>, <a class="el" href="watershed_8c_source.html#l00852">popNewPixel()</a>, <a class="el" href="environ_8h_source.html#l00249">PROCNAME</a>, <a class="el" href="ptabasic_8c_source.html#l00397">ptaGetIPt()</a>, <a class="el" href="watershed_8h_source.html#l00038">L_WShed::ptas</a>, <a class="el" href="watershed_8c_source.html#l00803">pushNewPixel()</a>, <a class="el" href="arrayaccess_8h_source.html#l00063">SET_DATA_BIT</a>, <a class="el" href="queue_8h_source.html#l00057">L_Queue::stack</a>, <a class="el" href="watershed_8c_source.html#l00122">L_WSPixel::x</a>, and <a class="el" href="watershed_8c_source.html#l00123">L_WSPixel::y</a>.</p>

<p>Referenced by <a class="el" href="watershed_8c_source.html#l00545">wshedSaveBasin()</a>.</p>

</div>
</div>
<a class="anchor" id="ac7d27902df99928b86f913ce9a71eaa9"></a><!-- doxytag: member="watershed.c::mergeLookup" ref="ac7d27902df99928b86f913ce9a71eaa9" args="(L_WSHED *wshed, l_int32 sindex, l_int32 dindex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> mergeLookup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l___w_shed.html">L_WSHED</a> *&#160;</td>
          <td class="paramname"><em>wshed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>sindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>dindex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="watershed_8c.html#ac7d27902df99928b86f913ce9a71eaa9">mergeLookup()</a></p>
<p>Input: wshed sindex (primary index being changed in the merge) dindex (index that  will point to after the merge) Return: 0 if OK, 1 on error</p>
<p>Notes: (1) The links are a sparse array of Numas showing current back-links. The lut gives the current index (of the seed or the minima for the wshed in which it is located. (2) Think of each entry in the lut. There are two types: owner: lut[index] = index redirect: lut[index] != index (3) This is called each time a merge occurs. It puts the lut and backlinks in a canonical form after the merge, where all entries in the lut point to the current "owner", which has all backlinks. That is, every "redirect" in the lut points to an "owner". The lut always gives the index of the current owner. </p>

<p>Definition at line <a class="el" href="watershed_8c_source.html#l00700">700</a> of file <a class="el" href="watershed_8c_source.html">watershed.c</a>.</p>

<p>References <a class="el" href="watershed_8h_source.html#l00047">L_WShed::arraysize</a>, <a class="el" href="environ_8h_source.html#l00251">ERROR_INT</a>, <a class="el" href="watershed_8c_source.html#l00124">L_WSPixel::index</a>, <a class="el" href="watershed_8h_source.html#l00046">L_WShed::links</a>, <a class="el" href="watershed_8h_source.html#l00045">L_WShed::lut</a>, <a class="el" href="environ_8h_source.html#l00171">NULL</a>, <a class="el" href="numabasic_8c_source.html#l00403">numaAddNumber()</a>, <a class="el" href="numabasic_8c_source.html#l00177">numaCreate()</a>, <a class="el" href="numabasic_8c_source.html#l00292">numaDestroy()</a>, <a class="el" href="numabasic_8c_source.html#l00557">numaGetCount()</a>, <a class="el" href="numabasic_8c_source.html#l00647">numaGetIValue()</a>, <a class="el" href="numafunc1_8c_source.html#l02543">numaJoin()</a>, <a class="el" href="environ_8h_source.html#l00249">PROCNAME</a>, and <a class="el" href="warper__reg_8c_source.html#l00027">size</a>.</p>

<p>Referenced by <a class="el" href="watershed_8c_source.html#l00290">wshedApply()</a>.</p>

</div>
</div>
<a class="anchor" id="a3a0c609aaabd7735a16ecbe3bb4257d1"></a><!-- doxytag: member="watershed.c::wshedGetHeight" ref="a3a0c609aaabd7735a16ecbe3bb4257d1" args="(L_WSHED *wshed, l_int32 val, l_int32 label, l_int32 *pheight)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> wshedGetHeight </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l___w_shed.html">L_WSHED</a> *&#160;</td>
          <td class="paramname"><em>wshed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *&#160;</td>
          <td class="paramname"><em>pheight</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="watershed_8c.html#a3a0c609aaabd7735a16ecbe3bb4257d1">wshedGetHeight()</a></p>
<p>Input: wshed (array of current indices) val (value of current pixel popped off queue) label (of pixel or 32 bpp label image) &amp;height (&lt;return&gt; height of current value from seed or minimum of watershed) Return: 0 if OK, 1 on error</p>
<p>Notes: (1) It is only necessary to find the height for a watershed that is indexed by a seed or a minima. This function should not be called on a finished watershed (that continues to fill). </p>

<p>Definition at line <a class="el" href="watershed_8c_source.html#l00762">762</a> of file <a class="el" href="watershed_8c_source.html">watershed.c</a>.</p>

<p>References <a class="el" href="environ_8h_source.html#l00251">ERROR_INT</a>, <a class="el" href="watershed_8h_source.html#l00041">L_WShed::namh</a>, <a class="el" href="watershed_8h_source.html#l00040">L_WShed::nash</a>, <a class="el" href="watershed_8h_source.html#l00044">L_WShed::nother</a>, <a class="el" href="numabasic_8c_source.html#l00647">numaGetIValue()</a>, and <a class="el" href="environ_8h_source.html#l00249">PROCNAME</a>.</p>

<p>Referenced by <a class="el" href="watershed_8c_source.html#l00290">wshedApply()</a>.</p>

</div>
</div>
<a class="anchor" id="a3425b9cae6b2e120f0728b383bfef50b"></a><!-- doxytag: member="watershed.c::pushNewPixel" ref="a3425b9cae6b2e120f0728b383bfef50b" args="(L_QUEUE *lq, l_int32 x, l_int32 y, l_int32 *pminx, l_int32 *pmaxx, l_int32 *pminy, l_int32 *pmaxy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void pushNewPixel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l___queue.html">L_QUEUE</a> *&#160;</td>
          <td class="paramname"><em>lq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *&#160;</td>
          <td class="paramname"><em>pminx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *&#160;</td>
          <td class="paramname"><em>pmaxx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *&#160;</td>
          <td class="paramname"><em>pminy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *&#160;</td>
          <td class="paramname"><em>pmaxy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="watershed_8c_source.html#l00803">803</a> of file <a class="el" href="watershed_8c_source.html">watershed.c</a>.</p>

<p>References <a class="el" href="environ_8h_source.html#l00214">CALLOC</a>, <a class="el" href="environ_8h_source.html#l00253">L_ERROR</a>, <a class="el" href="environ_8h_source.html#l00155">L_MAX</a>, <a class="el" href="environ_8h_source.html#l00151">L_MIN</a>, <a class="el" href="queue_8c_source.html#l00167">lqueueAdd()</a>, <a class="el" href="stack_8c_source.html#l00230">lstackGetCount()</a>, <a class="el" href="stack_8c_source.html#l00180">lstackRemove()</a>, <a class="el" href="environ_8h_source.html#l00249">PROCNAME</a>, <a class="el" href="queue_8h_source.html#l00057">L_Queue::stack</a>, <a class="el" href="watershed_8c_source.html#l00122">L_WSPixel::x</a>, <a class="el" href="watershed_8c_source.html#l00114">L_NewPixel::x</a>, <a class="el" href="watershed_8c_source.html#l00123">L_WSPixel::y</a>, and <a class="el" href="watershed_8c_source.html#l00115">L_NewPixel::y</a>.</p>

<p>Referenced by <a class="el" href="watershed_8c_source.html#l00588">identifyWatershedBasin()</a>.</p>

</div>
</div>
<a class="anchor" id="a3ca651df9c77227899bb748e71d4a5c5"></a><!-- doxytag: member="watershed.c::popNewPixel" ref="a3ca651df9c77227899bb748e71d4a5c5" args="(L_QUEUE *lq, l_int32 *px, l_int32 *py)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void popNewPixel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l___queue.html">L_QUEUE</a> *&#160;</td>
          <td class="paramname"><em>lq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *&#160;</td>
          <td class="paramname"><em>px</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *&#160;</td>
          <td class="paramname"><em>py</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="watershed_8c_source.html#l00852">852</a> of file <a class="el" href="watershed_8c_source.html">watershed.c</a>.</p>

<p>References <a class="el" href="environ_8h_source.html#l00253">L_ERROR</a>, <a class="el" href="queue_8c_source.html#l00232">lqueueRemove()</a>, <a class="el" href="stack_8c_source.html#l00150">lstackAdd()</a>, <a class="el" href="environ_8h_source.html#l00171">NULL</a>, <a class="el" href="environ_8h_source.html#l00249">PROCNAME</a>, <a class="el" href="queue_8h_source.html#l00057">L_Queue::stack</a>, <a class="el" href="watershed_8c_source.html#l00114">L_NewPixel::x</a>, and <a class="el" href="watershed_8c_source.html#l00115">L_NewPixel::y</a>.</p>

<p>Referenced by <a class="el" href="watershed_8c_source.html#l00588">identifyWatershedBasin()</a>.</p>

</div>
</div>
<a class="anchor" id="aa980f5908953b2a22fcf9c6481f2f9c6"></a><!-- doxytag: member="watershed.c::pushWSPixel" ref="aa980f5908953b2a22fcf9c6481f2f9c6" args="(L_HEAP *lh, L_STACK *stack, l_int32 val, l_int32 x, l_int32 y, l_int32 index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void pushWSPixel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l___heap.html">L_HEAP</a> *&#160;</td>
          <td class="paramname"><em>lh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_l___stack.html">L_STACK</a> *&#160;</td>
          <td class="paramname"><em>stack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="watershed_8c_source.html#l00889">889</a> of file <a class="el" href="watershed_8c_source.html">watershed.c</a>.</p>

<p>References <a class="el" href="environ_8h_source.html#l00214">CALLOC</a>, <a class="el" href="watershed_8c_source.html#l00124">L_WSPixel::index</a>, <a class="el" href="environ_8h_source.html#l00253">L_ERROR</a>, <a class="el" href="heap_8c_source.html#l00168">lheapAdd()</a>, <a class="el" href="stack_8c_source.html#l00230">lstackGetCount()</a>, <a class="el" href="stack_8c_source.html#l00180">lstackRemove()</a>, <a class="el" href="environ_8h_source.html#l00249">PROCNAME</a>, <a class="el" href="watershed_8c_source.html#l00121">L_WSPixel::val</a>, <a class="el" href="watershed_8c_source.html#l00122">L_WSPixel::x</a>, and <a class="el" href="watershed_8c_source.html#l00123">L_WSPixel::y</a>.</p>

<p>Referenced by <a class="el" href="watershed_8c_source.html#l00290">wshedApply()</a>.</p>

</div>
</div>
<a class="anchor" id="a6d741c3c8b7ee7c0875c4ead4fb5320b"></a><!-- doxytag: member="watershed.c::popWSPixel" ref="a6d741c3c8b7ee7c0875c4ead4fb5320b" args="(L_HEAP *lh, L_STACK *stack, l_int32 *pval, l_int32 *px, l_int32 *py, l_int32 *pindex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void popWSPixel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l___heap.html">L_HEAP</a> *&#160;</td>
          <td class="paramname"><em>lh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_l___stack.html">L_STACK</a> *&#160;</td>
          <td class="paramname"><em>stack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *&#160;</td>
          <td class="paramname"><em>pval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *&#160;</td>
          <td class="paramname"><em>px</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *&#160;</td>
          <td class="paramname"><em>py</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *&#160;</td>
          <td class="paramname"><em>pindex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="watershed_8c_source.html#l00940">940</a> of file <a class="el" href="watershed_8c_source.html">watershed.c</a>.</p>

<p>References <a class="el" href="watershed_8c_source.html#l00124">L_WSPixel::index</a>, <a class="el" href="environ_8h_source.html#l00253">L_ERROR</a>, <a class="el" href="heap_8c_source.html#l00224">lheapRemove()</a>, <a class="el" href="stack_8c_source.html#l00150">lstackAdd()</a>, <a class="el" href="environ_8h_source.html#l00171">NULL</a>, <a class="el" href="environ_8h_source.html#l00249">PROCNAME</a>, <a class="el" href="watershed_8c_source.html#l00121">L_WSPixel::val</a>, <a class="el" href="watershed_8c_source.html#l00122">L_WSPixel::x</a>, and <a class="el" href="watershed_8c_source.html#l00123">L_WSPixel::y</a>.</p>

<p>Referenced by <a class="el" href="watershed_8c_source.html#l00290">wshedApply()</a>.</p>

</div>
</div>
<a class="anchor" id="a78c5ce9a13fa18c53b0978a169cfabbe"></a><!-- doxytag: member="watershed.c::debugPrintLUT" ref="a78c5ce9a13fa18c53b0978a169cfabbe" args="(l_int32 *lut, l_int32 size, l_int32 debug)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void debugPrintLUT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> *&#160;</td>
          <td class="paramname"><em>lut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>debug</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="watershed_8c_source.html#l00976">976</a> of file <a class="el" href="watershed_8c_source.html">watershed.c</a>.</p>

<p>References <a class="el" href="warper__reg_8c_source.html#l00027">size</a>.</p>

<p>Referenced by <a class="el" href="watershed_8c_source.html#l00290">wshedApply()</a>.</p>

</div>
</div>
<a class="anchor" id="a67c62f50705600095088865dc9e2123b"></a><!-- doxytag: member="watershed.c::debugWshedMerge" ref="a67c62f50705600095088865dc9e2123b" args="(L_WSHED *wshed, char *descr, l_int32 x, l_int32 y, l_int32 label, l_int32 index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void debugWshedMerge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l___w_shed.html">L_WSHED</a> *&#160;</td>
          <td class="paramname"><em>wshed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>descr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="watershed_8c_source.html#l00992">992</a> of file <a class="el" href="watershed_8c_source.html">watershed.c</a>.</p>

<p>References <a class="el" href="watershed_8h_source.html#l00048">L_WShed::debug</a>.</p>

<p>Referenced by <a class="el" href="watershed_8c_source.html#l00290">wshedApply()</a>.</p>

</div>
</div>
<a class="anchor" id="a68bff1b7823ce81b1f8762a66eaed181"></a><!-- doxytag: member="watershed.c::wshedCreate" ref="a68bff1b7823ce81b1f8762a66eaed181" args="(PIX *pixs, PIX *pixm, l_int32 mindepth, l_int32 debugflag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_l___w_shed.html">L_WSHED</a>* wshedCreate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pix.html">PIX</a> *&#160;</td>
          <td class="paramname"><em>pixs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_pix.html">PIX</a> *&#160;</td>
          <td class="paramname"><em>pixm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>mindepth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a>&#160;</td>
          <td class="paramname"><em>debugflag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="leptprotos_8h.html#a0524659ec775f8d4bf08dd51f47a3c42">wshedCreate()</a></p>
<p>Input: pixs (8 bpp source) pixm (1 bpp 'marker' seed) mindepth (minimum depth; anything less is not saved) debugflag (1 for debug output) Return: WShed, or null on error</p>
<p>Notes: (1) It is not necessary for the fg pixels in the seed image be at minima, or that they be isolated. We extract a single pixel from each connected component, and a seed anywhere in a watershed will eventually label the watershed when the filling level reaches it. (2) Set mindepth to some value to ignore noise in pixs that can create small local minima. Any watershed shallower than mindepth, even if it has a seed, will not be saved; It will either be incorporated in another watershed or eliminated. </p>

<p>Definition at line <a class="el" href="watershed_8c_source.html#l00188">188</a> of file <a class="el" href="watershed_8c_source.html">watershed.c</a>.</p>

<p>References <a class="el" href="environ_8h_source.html#l00214">CALLOC</a>, <a class="el" href="watershed_8h_source.html#l00048">L_WShed::debug</a>, <a class="el" href="environ_8h_source.html#l00250">ERROR_PTR</a>, <a class="el" href="environ_8h_source.html#l00155">L_MAX</a>, <a class="el" href="watershed_8h_source.html#l00035">L_WShed::linelab32</a>, <a class="el" href="watershed_8h_source.html#l00034">L_WShed::linem1</a>, <a class="el" href="watershed_8h_source.html#l00033">L_WShed::lines8</a>, <a class="el" href="watershed_8h_source.html#l00036">L_WShed::linet1</a>, <a class="el" href="watershed_8c_source.html#l00110">MAX_LABEL_VALUE</a>, <a class="el" href="watershed_8h_source.html#l00030">L_WShed::mindepth</a>, <a class="el" href="environ_8h_source.html#l00171">NULL</a>, <a class="el" href="pix1_8c_source.html#l00440">pixClone()</a>, <a class="el" href="pix1_8c_source.html#l00269">pixCreate()</a>, <a class="el" href="pix1_8c_source.html#l00863">pixGetDepth()</a>, <a class="el" href="pix1_8c_source.html#l00898">pixGetDimensions()</a>, <a class="el" href="pix1_8c_source.html#l00833">pixGetHeight()</a>, <a class="el" href="pix1_8c_source.html#l01527">pixGetLinePtrs()</a>, <a class="el" href="pix1_8c_source.html#l00803">pixGetWidth()</a>, <a class="el" href="watershed_8h_source.html#l00031">L_WShed::pixlab</a>, <a class="el" href="watershed_8h_source.html#l00029">L_WShed::pixm</a>, <a class="el" href="watershed_8h_source.html#l00028">L_WShed::pixs</a>, <a class="el" href="pix2_8c_source.html#l00661">pixSetAllArbitrary()</a>, <a class="el" href="watershed_8h_source.html#l00032">L_WShed::pixt</a>, and <a class="el" href="environ_8h_source.html#l00249">PROCNAME</a>.</p>

<p>Referenced by <a class="el" href="watershedtest_8c_source.html#l00027">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a9f09dce887ebbfd83bfb757f39d063d2"></a><!-- doxytag: member="watershed.c::wshedDestroy" ref="a9f09dce887ebbfd83bfb757f39d063d2" args="(L_WSHED **pwshed)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wshedDestroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l___w_shed.html">L_WSHED</a> **&#160;</td>
          <td class="paramname"><em>pwshed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="leptprotos_8h.html#a5ec30434017f7d517fe0df4ea5242713">wshedDestroy()</a></p>
<p>Input: &amp;wshed (&lt;will be="" set="" to="" null="" before="" returning&gt;=""&gt;) Return: void </p>

<p>Definition at line <a class="el" href="watershed_8c_source.html#l00235">235</a> of file <a class="el" href="watershed_8c_source.html">watershed.c</a>.</p>

<p>References <a class="el" href="watershed_8h_source.html#l00047">L_WShed::arraysize</a>, <a class="el" href="environ_8h_source.html#l00216">FREE</a>, <a class="el" href="environ_8h_source.html#l00257">L_WARNING</a>, <a class="el" href="watershed_8h_source.html#l00035">L_WShed::linelab32</a>, <a class="el" href="watershed_8h_source.html#l00034">L_WShed::linem1</a>, <a class="el" href="watershed_8h_source.html#l00033">L_WShed::lines8</a>, <a class="el" href="watershed_8h_source.html#l00036">L_WShed::linet1</a>, <a class="el" href="watershed_8h_source.html#l00046">L_WShed::links</a>, <a class="el" href="watershed_8h_source.html#l00045">L_WShed::lut</a>, <a class="el" href="watershed_8h_source.html#l00042">L_WShed::nalevels</a>, <a class="el" href="watershed_8h_source.html#l00041">L_WShed::namh</a>, <a class="el" href="watershed_8h_source.html#l00040">L_WShed::nash</a>, <a class="el" href="watershed_8h_source.html#l00039">L_WShed::nasi</a>, <a class="el" href="environ_8h_source.html#l00171">NULL</a>, <a class="el" href="numabasic_8c_source.html#l00292">numaDestroy()</a>, <a class="el" href="watershed_8h_source.html#l00037">L_WShed::pixad</a>, <a class="el" href="pixabasic_8c_source.html#l00333">pixaDestroy()</a>, <a class="el" href="pix1_8c_source.html#l00466">pixDestroy()</a>, <a class="el" href="watershed_8h_source.html#l00031">L_WShed::pixlab</a>, <a class="el" href="watershed_8h_source.html#l00029">L_WShed::pixm</a>, <a class="el" href="watershed_8h_source.html#l00028">L_WShed::pixs</a>, <a class="el" href="watershed_8h_source.html#l00032">L_WShed::pixt</a>, <a class="el" href="environ_8h_source.html#l00249">PROCNAME</a>, <a class="el" href="ptabasic_8c_source.html#l00156">ptaDestroy()</a>, and <a class="el" href="watershed_8h_source.html#l00038">L_WShed::ptas</a>.</p>

<p>Referenced by <a class="el" href="watershedtest_8c_source.html#l00027">main()</a>.</p>

</div>
</div>
<a class="anchor" id="aede616b788436bd54e192e918b8ccd92"></a><!-- doxytag: member="watershed.c::wshedApply" ref="aede616b788436bd54e192e918b8ccd92" args="(L_WSHED *wshed)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> wshedApply </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l___w_shed.html">L_WSHED</a> *&#160;</td>
          <td class="paramname"><em>wshed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="leptprotos_8h.html#a0328fbb3fb44dae48502b332387bd215">wshedApply()</a></p>
<p>Input: wshed (generated from <a class="el" href="leptprotos_8h.html#a0524659ec775f8d4bf08dd51f47a3c42">wshedCreate()</a>) Return: 0 if OK, 1 on error</p>
<p>Iportant note: (1) This is buggy. It seems to locate watersheds that are duplicates. The watershed extraction after complete fill grabs some regions belonging to existing watersheds. See <a class="el" href="watershedtest_8c.html" title="Demonstrates the watershed algorithmn using wshedCreate(), pixLocalExtrema(), pixSelectMinInConnComp(...">prog/watershedtest.c</a> for testing. </p>

<p>Definition at line <a class="el" href="watershed_8c_source.html#l00290">290</a> of file <a class="el" href="watershed_8c_source.html">watershed.c</a>.</p>

<p>References <a class="el" href="watershed_8h_source.html#l00047">L_WShed::arraysize</a>, <a class="el" href="environ_8h_source.html#l00214">CALLOC</a>, <a class="el" href="watershed_8h_source.html#l00048">L_WShed::debug</a>, <a class="el" href="watershed_8c_source.html#l00976">debugPrintLUT()</a>, <a class="el" href="watershed_8c_source.html#l00992">debugWshedMerge()</a>, <a class="el" href="environ_8h_source.html#l00251">ERROR_INT</a>, <a class="el" href="arrayaccess_8h_source.html#l00118">GET_DATA_BYTE</a>, <a class="el" href="arrayaccess_8h_source.html#l00154">GET_DATA_FOUR_BYTES</a>, <a class="el" href="watershed_8c_source.html#l00124">L_WSPixel::index</a>, <a class="el" href="environ_8h_source.html#l00266">L_INFO_INT2</a>, <a class="el" href="environ_8h_source.html#l00155">L_MAX</a>, <a class="el" href="environ_8h_source.html#l00151">L_MIN</a>, <a class="el" href="pix_8h_source.html#l00609">L_SORT_INCREASING</a>, <a class="el" href="heap_8c_source.html#l00088">lheapCreate()</a>, <a class="el" href="heap_8c_source.html#l00127">lheapDestroy()</a>, <a class="el" href="heap_8c_source.html#l00253">lheapGetCount()</a>, <a class="el" href="watershed_8h_source.html#l00035">L_WShed::linelab32</a>, <a class="el" href="watershed_8h_source.html#l00033">L_WShed::lines8</a>, <a class="el" href="watershed_8h_source.html#l00046">L_WShed::links</a>, <a class="el" href="stack_8c_source.html#l00064">lstackCreate()</a>, <a class="el" href="stack_8c_source.html#l00104">lstackDestroy()</a>, <a class="el" href="watershed_8h_source.html#l00045">L_WShed::lut</a>, <a class="el" href="watershed_8c_source.html#l00110">MAX_LABEL_VALUE</a>, <a class="el" href="watershed_8c_source.html#l00700">mergeLookup()</a>, <a class="el" href="watershed_8h_source.html#l00030">L_WShed::mindepth</a>, <a class="el" href="watershed_8h_source.html#l00042">L_WShed::nalevels</a>, <a class="el" href="watershed_8h_source.html#l00041">L_WShed::namh</a>, <a class="el" href="watershed_8h_source.html#l00040">L_WShed::nash</a>, <a class="el" href="watershed_8h_source.html#l00039">L_WShed::nasi</a>, <a class="el" href="watershed_8h_source.html#l00043">L_WShed::nseeds</a>, <a class="el" href="environ_8h_source.html#l00171">NULL</a>, <a class="el" href="numabasic_8c_source.html#l00177">numaCreate()</a>, <a class="el" href="numabasic_8c_source.html#l00292">numaDestroy()</a>, <a class="el" href="numabasic_8c_source.html#l00738">numaGetIArray()</a>, <a class="el" href="numabasic_8c_source.html#l00647">numaGetIValue()</a>, <a class="el" href="numafunc1_8c_source.html#l00645">numaMakeConstant()</a>, <a class="el" href="numafunc1_8c_source.html#l00614">numaMakeSequence()</a>, <a class="el" href="numabasic_8c_source.html#l00679">numaSetValue()</a>, <a class="el" href="pixabasic_8c_source.html#l00106">pixaCreate()</a>, <a class="el" href="watershed_8h_source.html#l00037">L_WShed::pixad</a>, <a class="el" href="pix1_8c_source.html#l00466">pixDestroy()</a>, <a class="el" href="ptafunc1_8c_source.html#l01526">pixGenerateFromPta()</a>, <a class="el" href="pix1_8c_source.html#l00898">pixGetDimensions()</a>, <a class="el" href="pix2_8c_source.html#l00148">pixGetPixel()</a>, <a class="el" href="seedfill_8c_source.html#l01125">pixLocalExtrema()</a>, <a class="el" href="watershed_8h_source.html#l00029">L_WShed::pixm</a>, <a class="el" href="seedfill_8c_source.html#l01504">pixRemoveSeededComponents()</a>, <a class="el" href="watershed_8h_source.html#l00028">L_WShed::pixs</a>, <a class="el" href="seedfill_8c_source.html#l01405">pixSelectMinInConnComp()</a>, <a class="el" href="watershed_8c_source.html#l00940">popWSPixel()</a>, <a class="el" href="environ_8h_source.html#l00249">PROCNAME</a>, <a class="el" href="ptabasic_8c_source.html#l00156">ptaDestroy()</a>, <a class="el" href="ptabasic_8c_source.html#l00346">ptaGetCount()</a>, <a class="el" href="ptabasic_8c_source.html#l00397">ptaGetIPt()</a>, <a class="el" href="watershed_8h_source.html#l00038">L_WShed::ptas</a>, <a class="el" href="watershed_8c_source.html#l00889">pushWSPixel()</a>, <a class="el" href="arrayaccess_8h_source.html#l00157">SET_DATA_FOUR_BYTES</a>, <a class="el" href="environ_8h_source.html#l00175">TRUE</a>, <a class="el" href="watershed_8c_source.html#l00121">L_WSPixel::val</a>, <a class="el" href="watershed_8c_source.html#l00762">wshedGetHeight()</a>, <a class="el" href="watershed_8c_source.html#l00545">wshedSaveBasin()</a>, <a class="el" href="watershed_8c_source.html#l00122">L_WSPixel::x</a>, and <a class="el" href="watershed_8c_source.html#l00123">L_WSPixel::y</a>.</p>

<p>Referenced by <a class="el" href="watershedtest_8c_source.html#l00027">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a50c8a37adc1829477e0f1da0f8fb9528"></a><!-- doxytag: member="watershed.c::wshedBasins" ref="a50c8a37adc1829477e0f1da0f8fb9528" args="(L_WSHED *wshed, PIXA **ppixa, NUMA **pnalevels)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="environ_8h.html#a9085c7874153c280a4171244aa052e4e">l_int32</a> wshedBasins </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l___w_shed.html">L_WSHED</a> *&#160;</td>
          <td class="paramname"><em>wshed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_pixa.html">PIXA</a> **&#160;</td>
          <td class="paramname"><em>ppixa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_numa.html">NUMA</a> **&#160;</td>
          <td class="paramname"><em>pnalevels</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="leptprotos_8h.html#abe2725699dbe9dc70b44ce275656f2b5">wshedBasins()</a></p>
<p>Input: wshed &amp;pixa (&lt;optional return&gt;=""&gt; mask of watershed basins) &amp;nalevels (&lt;optional return&gt;=""&gt; watershed levels) Return: 0 if OK, 1 on error </p>

<p>Definition at line <a class="el" href="watershed_8c_source.html#l01020">1020</a> of file <a class="el" href="watershed_8c_source.html">watershed.c</a>.</p>

<p>References <a class="el" href="environ_8h_source.html#l00251">ERROR_INT</a>, <a class="el" href="pix_8h_source.html#l00598">L_CLONE</a>, <a class="el" href="watershed_8h_source.html#l00042">L_WShed::nalevels</a>, <a class="el" href="numabasic_8c_source.html#l00355">numaClone()</a>, <a class="el" href="pixabasic_8c_source.html#l00377">pixaCopy()</a>, <a class="el" href="watershed_8h_source.html#l00037">L_WShed::pixad</a>, and <a class="el" href="environ_8h_source.html#l00249">PROCNAME</a>.</p>

<p>Referenced by <a class="el" href="watershed_8c_source.html#l01080">wshedRenderColors()</a>, and <a class="el" href="watershed_8c_source.html#l01044">wshedRenderFill()</a>.</p>

</div>
</div>
<a class="anchor" id="a293a9841804a565cb6041c927d3a11e5"></a><!-- doxytag: member="watershed.c::wshedRenderFill" ref="a293a9841804a565cb6041c927d3a11e5" args="(L_WSHED *wshed)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_pix.html">PIX</a>* wshedRenderFill </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l___w_shed.html">L_WSHED</a> *&#160;</td>
          <td class="paramname"><em>wshed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="leptprotos_8h.html#a51ed87035191dfd0e96a6a829738a29c">wshedRenderFill()</a></p>
<p>Input: wshed Return: pixd (initial image with all basins filled), or null on error </p>

<p>Definition at line <a class="el" href="watershed_8c_source.html#l01044">1044</a> of file <a class="el" href="watershed_8c_source.html">watershed.c</a>.</p>

<p>References <a class="el" href="environ_8h_source.html#l00250">ERROR_PTR</a>, <a class="el" href="pix_8h_source.html#l00598">L_CLONE</a>, <a class="el" href="environ_8h_source.html#l00171">NULL</a>, <a class="el" href="numabasic_8c_source.html#l00292">numaDestroy()</a>, <a class="el" href="numabasic_8c_source.html#l00647">numaGetIValue()</a>, <a class="el" href="pixabasic_8c_source.html#l00333">pixaDestroy()</a>, <a class="el" href="pixabasic_8c_source.html#l00746">pixaGetBoxGeometry()</a>, <a class="el" href="pixabasic_8c_source.html#l00554">pixaGetCount()</a>, <a class="el" href="pixabasic_8c_source.html#l00594">pixaGetPix()</a>, <a class="el" href="pix1_8c_source.html#l00548">pixCopy()</a>, <a class="el" href="pix1_8c_source.html#l00466">pixDestroy()</a>, <a class="el" href="pix3_8c_source.html#l00569">pixPaintThroughMask()</a>, <a class="el" href="watershed_8h_source.html#l00028">L_WShed::pixs</a>, <a class="el" href="environ_8h_source.html#l00249">PROCNAME</a>, and <a class="el" href="watershed_8c_source.html#l01020">wshedBasins()</a>.</p>

<p>Referenced by <a class="el" href="watershedtest_8c_source.html#l00027">main()</a>.</p>

</div>
</div>
<a class="anchor" id="af2d81f85f2d1b43e5c73a501e8ae3c72"></a><!-- doxytag: member="watershed.c::wshedRenderColors" ref="af2d81f85f2d1b43e5c73a501e8ae3c72" args="(L_WSHED *wshed)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_pix.html">PIX</a>* wshedRenderColors </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l___w_shed.html">L_WSHED</a> *&#160;</td>
          <td class="paramname"><em>wshed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="leptprotos_8h.html#ae163fc49ee7bc8b2fed73317b5ebc0b8">wshedRenderColors()</a></p>
<p>Input: wshed Return: pixd (initial image with all basins filled), or null on error </p>

<p>Definition at line <a class="el" href="watershed_8c_source.html#l01080">1080</a> of file <a class="el" href="watershed_8c_source.html">watershed.c</a>.</p>

<p>References <a class="el" href="environ_8h_source.html#l00250">ERROR_PTR</a>, <a class="el" href="environ_8h_source.html#l00171">NULL</a>, <a class="el" href="pixabasic_8c_source.html#l00333">pixaDestroy()</a>, <a class="el" href="pixafunc2_8c_source.html#l00110">pixaDisplay()</a>, <a class="el" href="pixafunc2_8c_source.html#l00271">pixaDisplayRandomCmap()</a>, <a class="el" href="pix3_8c_source.html#l00328">pixCombineMasked()</a>, <a class="el" href="pixconv_8c_source.html#l02453">pixConvertTo32()</a>, <a class="el" href="pix1_8c_source.html#l00548">pixCopy()</a>, <a class="el" href="pix1_8c_source.html#l00466">pixDestroy()</a>, <a class="el" href="pix1_8c_source.html#l00898">pixGetDimensions()</a>, <a class="el" href="watershed_8h_source.html#l00028">L_WShed::pixs</a>, <a class="el" href="environ_8h_source.html#l00249">PROCNAME</a>, and <a class="el" href="watershed_8c_source.html#l01020">wshedBasins()</a>.</p>

<p>Referenced by <a class="el" href="watershedtest_8c_source.html#l00027">main()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a668ddf9d750838914ecd3d0cfa91ce19"></a><!-- doxytag: member="watershed.c::MAX_LABEL_VALUE" ref="a668ddf9d750838914ecd3d0cfa91ce19" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="environ_8h.html#a4d4d7254020fc95aef5dde8884405358">l_uint32</a> <a class="el" href="watershed_8c.html#a668ddf9d750838914ecd3d0cfa91ce19">MAX_LABEL_VALUE</a> = 0x7fffffff<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="watershed_8c_source.html#l00110">110</a> of file <a class="el" href="watershed_8c_source.html">watershed.c</a>.</p>

<p>Referenced by <a class="el" href="watershed_8c_source.html#l00588">identifyWatershedBasin()</a>, <a class="el" href="watershed_8c_source.html#l00290">wshedApply()</a>, and <a class="el" href="watershed_8c_source.html#l00188">wshedCreate()</a>.</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="watershed_8c.html">watershed.c</a>      </li>
      <li class="footer">Generated by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
